(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2405bd50"],{"011f":function(t,a,e){"use strict";e("341a")},"0ab9":function(t,a,e){"use strict";t.exports.numbers=i,t.exports.sum=s,t.exports.mean=o,t.exports.median=l,t.exports.mode=h,t.exports.variance=d,t.exports.sampleVariance=m,t.exports.populationVariance=d,t.exports.stdev=c,t.exports.sampleStdev=p,t.exports.populationStdev=c,t.exports.percentile=y,t.exports.histogram=g;var r=e("7380");function i(t){var a=[];if(null==t)return a;for(var e=0;e<t.length;e++)r(t[e])&&a.push(+t[e]);return a}function n(t){return t.sort((function(t,a){return t-a}))}function s(t){t=i(t);for(var a=0,e=0;e<t.length;e++)a+=t[e];return a}function o(t){return t=i(t),0===t.length?NaN:s(t)/t.length}function l(t){if(t=i(t),0===t.length)return NaN;var a=t.length/2|0;return t=n(t),t.length%2?t[a]:(t[a-1]+t[a])/2}function h(t){if(t=i(t),0===t.length)return NaN;for(var a=NaN,e={},r=0;r<t.length;r++){var n=t[r],s=e[n]||0;s++,e[n]=s}var o=i(Object.keys(e).sort((function(t,a){return e[a]-e[t]})));if(a=o[0],e[o[1]]==e[a]){if(o.length==t.length)return t;var l=new Set([a]),h=e[a];for(r=1;r<o.length;r++){if(e[o[r]]!=h)break;l.add(o[r])}return l}return a}function u(t){t=i(t);for(var a=o(t),e=[],r=0;r<t.length;r++)e.push(Math.pow(t[r]-a,2));return e}function d(t){return o(u(t))}function m(t){var a=u(t);return a.length<=1?NaN:s(a)/(a.length-1)}function c(t){return Math.sqrt(d(t))}function p(t){return Math.sqrt(m(t))}function y(t,a){if(t=i(t),0===t.length||null==a||a<0)return NaN;a>1&&(a=1),t=n(t);var e=t.length*a-.5;if((0|e)===e)return t[e];var r=0|e,s=e-r;return(1-s)*t[r]+s*t[Math.min(r+1,t.length-1)]}function g(t,a){if(null==t)return null;if(t=n(i(t)),0===t.length)return null;null==a&&(a=Math.sqrt(t.length)),a=Math.round(a),a<1&&(a=1);var e=t[0],r=t[t.length-1];e===r&&(e-=.5,r+=.5);var s=r-e,o=(s+.05*s)/a,l=(e+r)/2,h=l-o*Math.floor(a/2);if(a%2!==0)h=l-o/2-o*Math.floor(a/2);for(var u={values:Array(a).fill(0),bins:a,binWidth:o,binLimits:[h,h+o*a]},d=0,m=0;m<t.length;m++){while(t[m]>(d+1)*o+h)d++;u.values[d]++}return u}},"180f":function(t,a,e){},"341a":function(t,a,e){},"369b":function(t,a,e){"use strict";e("180f")},7380:function(t,a){function e(t){return!isNaN(parseFloat(t))&&isFinite(t)}t.exports=e},"7e98":function(t,a,e){"use strict";var r=e("9399"),i=e.n(r);a["a"]={data(){return{cdfSubdivisions:1e3,graphColor:{primary:new i.a({type:"hex",color:"#7FA44F"}),secondary:new i.a({type:"hex",color:"#989998"})},latencyHourlySpinner:{show:!0,message:"Generating graph..."},latencyHourlyData:{ready:!1,data:[]},latencyHourlyLayout:{ready:!1,layout:{title:"Average DNS Query Latency by Hour",xaxis:{title:"Hour of Day (UTC)",range:[0,23],dtick:1},yaxis:{title:"Average Endpoint DNS Query Latency (ms)"}}},latencyTimeSpinner:{show:!0,message:"Generating graph..."},latencyTimeData:{ready:!1,data:[]},latencyTimeLayout:{ready:!1,layout:{title:"DNS Query Latency to Different DNS Resolvers over Time",xaxis:{title:"Date",type:"date"},yaxis:{title:"Endpoint DNS Query Latency (ms)"}}},latencyTimeCDFData:{ready:!1,data:[]},latencyTimeCDFLayout:{ready:!1,layout:{title:"CDF for DNS Query Latency to Different DNS Resolvers over Time",xaxis:{title:"Endpoint DNS Query Latency (ms)",autorange:!1},yaxis:{title:"Cumulative Probability",autorange:!1,range:[0,1]}}},bandwidthTimeSpinner:{show:!0,message:"Generating graph..."},bandwidthTimeData:{ready:!1,data:[]},bandwidthTimeLayout:{ready:!1,layout:{title:"Available Bandwidth & Bottleneck Bandwidth to Controller over Time",xaxis:{title:"Date",type:"date"},yaxis:{title:"Measured Bandwidth (Mbps)"}}},bandwidthTimeCDFData:{ready:!1,data:[]},bandwidthTimeCDFLayout:{ready:!1,layout:{title:"CDF for Available Bandwidth & Bottleneck Bandwidth to Controller over Time",xaxis:{title:"Measured Bandwidth (Mbps)",autorange:!1},yaxis:{title:"Cumulative Probability",autorange:!1,range:[0,1]}}},bandwidthHourlySpinner:{show:!0,message:"Generating graph..."},bandwidthHourlyData:{ready:!1,data:[]},bandwidthHourlyLayout:{ready:!1,layout:{title:"Average Available Bandwidth & Bottleneck Bandwidth to Controller by Hour",xaxis:{title:"Hour of Day (UTC)",range:[0,23],dtick:1},yaxis:{title:"Average Measured Bandwidth (Mbps)"}}},rttTimeSpinner:{show:!0,message:"Generating graph..."},rttTimeData:{ready:!1,data:[]},rttTimeLayout:{ready:!1,layout:{title:"Endpoint Controller RTT over Time",xaxis:{title:"Date",type:"date"},yaxis:{title:"Endpoint Controller RTT (ms)"}}},rttHourlySpinner:{show:!0,message:"Generating graph..."},rttHourlyData:{ready:!1,data:[]},rttHourlyLayout:{ready:!1,layout:{title:"Average Endpoint Controller RTT by Hour",xaxis:{title:"Hour of Day (UTC)",range:[0,23],dtick:1},yaxis:{title:"Average Endpoint Controller RTT (ms)"}}}}},computed:{endpointGraphs(){return[{spinner:this.latencyTimeSpinner,data:this.latencyTimeData,layout:this.latencyTimeLayout},{spinner:this.latencyTimeSpinner,data:this.latencyTimeCDFData,layout:this.latencyTimeCDFLayout},{spinner:this.latencyHourlySpinner,data:this.latencyHourlyData,layout:this.latencyHourlyLayout},{spinner:this.bandwidthTimeSpinner,data:this.bandwidthTimeData,layout:this.bandwidthTimeLayout},{spinner:this.bandwidthTimeSpinner,data:this.bandwidthTimeCDFData,layout:this.bandwidthTimeCDFLayout},{spinner:this.bandwidthHourlySpinner,data:this.bandwidthHourlyData,layout:this.bandwidthHourlyLayout},{spinner:this.rttTimeSpinner,data:this.rttTimeData,layout:this.rttTimeLayout},{spinner:this.rttHourlySpinner,data:this.rttHourlyData,layout:this.rttHourlyLayout}]}}}},9399:function(t,a,e){"use strict";function r(t,a){for(var e=0;e<a.length;e++){var r=a[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,a,e){return a&&r(t.prototype,a),e&&r(t,e),t}var n=function(){function t(t){var a=void 0===t?{color:[0,0,0],type:"rgb",precision:3,capitalize:!0}:t,e=a.color,r=void 0===e?[0,0,0]:e,i=a.type,n=void 0===i?"rgb":i,s=a.precision,o=void 0===s?3:s,l=a.capitalize,h=void 0===l||l;this.updateColor(r,n),this.precision=o,this.capitalize=h}return t.prototype.updateColor=function(a,e){var r;if(void 0===e&&(e="rgb"),"string"!=typeof e)throw new TypeError("Parameter 2 must be of type string.");if(e=e.toLowerCase(),!t.validTypes.includes(e))throw new TypeError("Parameter 2 '"+e+"' is not a valid type.");switch(e){case"rgb":r=t.rgbToXyz(a);break;case"hsl":r=t.rgbToXyz(t.hslToRgb(a));break;case"hex":r=t.rgbToXyz(t.hexToRgb(a));break;case"lab":r=t.labToXyz(a);break;case"lchab":r=t.labToXyz(t.lchABToLab(a));break;case"luv":r=t.luvToXyz(a);break;case"lchuv":r=t.luvToXyz(t.lchUVToLuv(a));break;case"xyz":case"default":this._xyz=a,this._rgb=t.xyzToRgb(this._xyz),this._hsl=t.rgbToHsl(this._rgb),this._hex=t.rgbToHex(this._rgb),this._lab=t.xyzToLab(this._xyz),this._lchab=t.labToLCHab(this._lab),this._luv=t.xyzToLuv(this._xyz),this._lchuv=t.luvToLCHuv(this._luv)}"xyz"!==e&&this.updateColor(r,"xyz")},t.rgbToHsl=function(t){var a=t[0]/255,e=t[1]/255,r=t[2]/255,i=Math.max(a,e,r),n=Math.min(a,e,r),s=(i+n)/2,o=0,l=0;return i!==n&&(o=s<.5?(i-n)/(i+n):(i-n)/(2-i-n),l=a===i?(e-r)/(i-n):e===i?2+(r-a)/(i-n):4+(a-e)/(i-n)),[(l=(l*=60)<0?l%360+360:l)+0,0+(o*=100),0+(s*=100)]},t.hslToRgb=function(t){var a=t[0],e=t[1],r=t[2];isFinite(a)||(a=0),isFinite(e)||(e=0),isFinite(r)||(r=0),a=a<0?a%360+360:a,r/=100,e/=100,a/=60;var i=(1-Math.abs(2*r-1))*e,n=i*(1-Math.abs(a%2-1)),s=r-i/2,o=a<1?[i,n,0]:a<2?[n,i,0]:a<3?[0,i,n]:a<4?[0,n,i]:a<5?[n,0,i]:[i,0,n];return o.map((function(t){return Math.round(255*(t+s))+0}))},t.rgbToHex=function(t){function a(t){var a=t.toString(16);return 1===a.length?"0"+a:a}var e=t[0],r=t[1],i=t[2];return"#"+a(e)+a(r)+a(i)},t.hexToRgb=function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,a,e,r){return a+a+e+e+r+r}));var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return a?[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]:null},t.rgbToXyz=function(t){function a(t){return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}var e=t[0]/255,r=t[1]/255,i=t[2]/255,n=a(e),s=a(r),o=a(i);return[100*(.4124*n+.3576*s+.1805*o)+0,100*(.2126*n+.7152*s+.0722*o)+0,100*(.0193*n+.1192*s+.9505*o)+0]},t.xyzToRgb=function(t){function a(t){return t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055}var e=t[0]/100,r=t[1]/100,i=t[2]/100,n=-.9689307147293197*e+1.8757560608852415*r+.041517523842953964*i,s=.055710120445510616*e+-.2040210505984867*r+1.0569959422543882*i,o=a(3.2406254773200533*e-1.5372079722103187*r-.4986285986982479*i),l=a(n),h=a(s);return[Math.round(255*o)+0,Math.round(255*l)+0,Math.round(255*h)+0]},t.xyzToLab=function(a){function e(t){return 216/24389<t?s(t):(24389/27*t+16)/116}var r=a[0]/t.d65[0],i=a[1]/t.d65[1],n=a[2]/t.d65[2],s=null!=Math.cbrt?Math.cbrt:function(t){return Math.pow(t,1/3)},o=e(r),l=e(i);return[116*l-16,0+500*(o-l),0+200*(l-e(n))]},t.labToXyz=function(a){var e=a[0],r=a[1],i=216/24389,n=24389/27,s=(e+16)/116,o=s-a[2]/200,l=r/500+s,h=Math.pow(l,3)>i?Math.pow(l,3):(116*l-16)/n,u=8<e?Math.pow((e+16)/116,3):e/n,d=Math.pow(o,3)>i?Math.pow(o,3):(116*o-16)/n;return[h*t.d65[0]+0,u*t.d65[1]+0,d*t.d65[2]+0]},t.labToLCHab=function(a){var e=a[1],r=Math.abs(a[2])<t.maxZeroTolerance?0:a[2],i=Math.sqrt(e*e+r*r),n=0<=Math.atan2(r,e)?Math.atan2(r,e)/Math.PI*180:Math.atan2(r,e)/Math.PI*180+360;return[a[0]+0,i+0,0+n]},t.lchABToLab=function(t){var a=t[1],e=t[2],r=a*Math.cos(e/180*Math.PI),i=a*Math.sin(e/180*Math.PI);return[t[0]+0,0+r,0+i]},t.xyzToLuv=function(a){var e=a[0],r=a[1],i=a[2],n=t.d65[0],s=t.d65[1],o=t.d65[2],l=9*s/(n+15*s+3*o),h=4*n/(n+15*s+3*o);if(0===e&&0===r&&0===i)return[0,0,0];var u=9*r/(e+15*r+3*i),d=4*e/(e+15*r+3*i),m=r/s,c=null!=Math.cbrt?Math.cbrt:function(t){return Math.pow(t,1/3)},p=216/24389<m?116*c(m,1/3)-16:24389/27*m;return[0+p,0+13*p*(d-h),0+13*p*(u-l)]},t.luvToXyz=function(a){var e=a[0],r=a[1],i=a[2],n=t.d65[0],s=t.d65[1],o=t.d65[2],l=9*s/(n+15*s+3*o),h=4*n/(n+15*s+3*o),u=8<e?Math.pow((e+16)/116,3):e/(24389/27),d=-5*u,m=(52*e/(r+13*e*h)-1)/3||0,c=((u*(39*e/(i+13*e*l)-5)||0)-d)/(m- -1/3);return[100*c+0,100*u+0,100*(c*m+d)+0]},t.luvToLCHuv=function(a){var e=a[0],r=Math.abs(a[1])<t.maxZeroTolerance?0:a[1],i=Math.abs(a[2])<t.maxZeroTolerance?0:a[2],n=Math.sqrt(r*r+i*i),s=180*Math.atan2(i,r)/Math.PI;return[e+0,n+0,(s=0<=s?s:s+360)+0]},t.lchUVToLuv=function(t){var a=t[0],e=t[1],r=t[2]/180*Math.PI;return[a+0,0+e*Math.cos(r),0+e*Math.sin(r)]},t.luminance=function(a,e){if(void 0===e&&(e="rgb"),"string"!=typeof e)throw new TypeError("Parameter 2 must be of type string.");if(e=e.toLowerCase(),!t.validTypes.includes(e))throw new TypeError("Parameter 2 '"+e+"' is not a valid type.");"rgb"!==e&&(a=new t({color:a,type:e}).rgb);for(var r=0;r<a.length;r++)a[r]/=255,a[r]<.03928?a[r]/=12.92:a[r]=Math.pow((a[r]+.055)/1.055,2.4);return.2126*a[0]+.7152*a[1]+.0722*a[2]},t.random=function(){return new t({color:[255,255,255].map((function(t){return Math.round(t*Math.random())}))})},t.randomFromString=function(a){function e(t){for(var a=4294967295,e=0;e<t.length;e++){var r=4026531840&(a=(a<<4)+t.charCodeAt(e));0!=r&&(a^=r>>>24,a^=r)}return Math.abs(a)}void 0===a&&(a="");var r=e(a),i=e(a+r);return new t({color:[r%256,i%256,e(a+i)%256]})},t.randomOfType=function(a){if(void 0===a&&(a="rgb"),"string"!=typeof a)throw new TypeError("Parameter 1 must be of type string.");if(a=a.toLowerCase(),!t.validTypes.includes(a))throw new TypeError("Parameter 1 '"+a+"' is not a valid type.");return t.random()[a]},t.randomOfTypeFormatted=function(a,e,r){if(void 0===a&&(a="rgb"),void 0===e&&(e=!0),void 0===r&&(r=3),"string"!=typeof a)throw new TypeError("Parameter 1 must be of type string.");if(a=a.toLowerCase(),!t.validTypes.includes(a))throw new TypeError("Parameter 1 '"+a+"' is not a valid type.");var i=t.random();return i.capitalize=e,i.precision=r,i[a+"String"]},t.contrastTextColor=function(a,e){if(void 0===e&&(e="rgb"),"string"!=typeof e)throw new TypeError("Parameter 2 must be of type string.");if(e=e.toLowerCase(),!t.validTypes.includes(e))throw new TypeError("Parameter 2 '"+e+"' is not a valid type.");var r=t.contrastRatio(new t({color:[255,255,255]}),new t({color:a,type:e}));return t.contrastRatio(new t({color:[0,0,0]}),new t({color:a,type:e}))<r?"#FFFFFF":"#000000"},t.contrastRatio=function(a,e){if(!(a instanceof t))throw new TypeError("Parameter 1 must be of type Color.");if(!(e instanceof t))throw new TypeError("Parameter 2 must be of type Color.");var r=t.luminance(a.rgb)+.05,i=t.luminance(e.rgb)+.05;return r<i?i/r:r/i},i(t,[{key:"rgb",get:function(){return this._rgb},set:function(t){this.updateColor(t,"rgb")}},{key:"rgbString",get:function(){var t="RGB("+this.rgb.join(", ")+")";return this.capitalize?t.toUpperCase():t.toLowerCase()}},{key:"hsl",get:function(){return this._hsl},set:function(t){this.updateColor(t,"hsl")}},{key:"hslString",get:function(){var t=this,a="HSL("+this.hsl.map((function(a){return a.toFixed(t.precision)})).join(", ")+")";return this.capitalize?a.toUpperCase():a.toLowerCase()}},{key:"hex",get:function(){return this._hex},set:function(t){this.updateColor(t,"hex")}},{key:"hexString",get:function(){var t=this._hex;return this.capitalize?t.toUpperCase():t.toLowerCase()}},{key:"xyz",get:function(){return this._xyz},set:function(t){this.updateColor(t,"xyz")}},{key:"xyzString",get:function(){var t=this,a="XYZ("+this.xyz.map((function(a){return a.toFixed(t.precision)})).join(", ")+")";return this.capitalize?a.toUpperCase():a.toLowerCase()}},{key:"lab",get:function(){return this._lab},set:function(t){this.updateColor(t,"lab")}},{key:"labString",get:function(){var t=this,a="LAB("+this.lab.map((function(a){return a.toFixed(t.precision)})).join(", ")+")";return this.capitalize?a.toUpperCase():a.toLowerCase()}},{key:"lchab",get:function(){return this._lchab},set:function(t){this.updateColor(t,"lchab")}},{key:"lchabString",get:function(){var t=this,a=this.lchab.map((function(a){return a.toFixed(t.precision)}));return this.capitalize?"LCHab("+a.join(", ")+")":"lchAB("+a.join(", ")+")"}},{key:"luv",get:function(){return this._luv},set:function(t){this.updateColor(t,"luv")}},{key:"luvString",get:function(){var t=this,a="LUV("+this.luv.map((function(a){return a.toFixed(t.precision)})).join(", ")+")";return this.capitalize?a.toUpperCase():a.toLowerCase()}},{key:"lchuv",get:function(){return this._lchuv},set:function(t){this.updateColor(t,"lchuv")}},{key:"lchuvString",get:function(){var t=this,a=this.lchuv.map((function(a){return a.toFixed(t.precision)}));return this.capitalize?"LCHuv("+a.join(", ")+")":"lchUV("+a.join(", ")+")"}}]),t}();n.validTypes=["rgb","hex","hsl","xyz","lab","lchab","luv","lchuv"],n.d65=[95.05,100,108.9],n.maxZeroTolerance=Math.pow(10,-12),t.exports=n},c3c0:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("main",{staticClass:"monitors"},[t.monitorIDs?e("ac-grid",{attrs:{cols:"12","align-h":"center"}},[e("ac-col",{staticClass:"graph-row",attrs:{cols:"11"}},[e("ac-grid",{staticClass:"endpoint-summary",attrs:{cols:"4"}},[e("ac-col",{staticClass:"summary-section",attrs:{cols:"4","md-cols":"2","lg-cols":"1"}},[e("div",{staticClass:"summary-key"},[t._v("Monitor")]),e("div",{staticClass:"summary-value"},[t._v(t._s(t.endpointData.id))])]),e("ac-col",{staticClass:"summary-section",attrs:{cols:"4","md-cols":"2","lg-cols":"1"}},[e("div",{staticClass:"summary-key"},[t._v("Description")]),e("div",{staticClass:"summary-value"},[t._v(t._s(t.endpointData.description))])]),e("ac-col",{staticClass:"summary-section",attrs:{cols:"4","md-cols":"2","lg-cols":"1"}},[e("div",{staticClass:"summary-key"},[t._v("Last Seen")]),e("div",{staticClass:"summary-value"},[t._v(t._s(t.endpointData.lastSeenTime))])]),e("ac-col",{staticClass:"summary-section",attrs:{cols:"4","md-cols":"2","lg-cols":"1"}},[e("div",{staticClass:"summary-key"},[t._v("Last IP")]),e("div",{staticClass:"summary-value"},[t._v(t._s(t.endpointData.lastSeenIP))])])],1)],1)],1):t._e(),e("ac-grid",{attrs:{cols:"12","align-h":"center"}},[e("ac-col",{attrs:{cols:"11"}},[e("date-range-dropdown",{attrs:{callback:t.processHeatmapData,route:{name:"Monitors",params:{id:this.params.id}}},on:{change:t.setTimeRange}})],1)],1),e("ac-grid",{attrs:{cols:"12","align-h":"center"}},[e("ac-col",{staticClass:"graph-row",attrs:{cols:"11"}},[e("heatmap",{attrs:{spinner:t.heatmapSpinner,dataSummary:t.dataSummary,legend:"",embedIDURL:function(t,a){return"<a href='#/monitors/"+t+"' style='font-size:10px;' target='_self'>"+a+"</a>"}}})],1)],1),t.monitorIDs?e("div",t._l(t.endpointGraphs,(function(t,a){return e("ac-grid",{key:a,attrs:{cols:"12","align-h":"center"}},[e("ac-col",{staticClass:"graph-row",attrs:{cols:"11"}},[e("graph",{attrs:{data:t.data,layout:t.layout,spinner:t.spinner}})],1)],1)})),1):t._e()],1)},i=[],n=(e("13d5"),e("caad"),e("0ab9")),s=e.n(n),o=e("6ccf"),l=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{ref:"wrapper",staticClass:"status-heatmap"},[e("div",{ref:"graphMenu",staticClass:"graph-menu"},[t.legend?e("div",{staticClass:"legend-wrapper"},[e("div",{class:{legend:!0,show:t.showFullLegend}},t._l(t.statusTypeList,(function(a){return e("div",{key:a.type,class:["key-element",a.hidden?"disabled":""],on:{click:function(e){return t.toggleHiddenStatus(a.type)}}},[e("div",{staticClass:"key-color",style:{backgroundColor:a.color}}),e("div",{staticClass:"key-label"},[t._v(t._s(a.type))])])})),0),e("div",{staticClass:"legend-toggle",on:{click:function(a){t.showFullLegend=!t.showFullLegend}}},[t._v(t._s(t.legendToggleText))])]):t._e()]),e("graph",{ref:"graphContainer",staticClass:"graphContainer",attrs:{layout:t.graphLayout,data:t.graphData,config:t.graphConfig,spinner:t.tempSpinner}})],1)},h=[],u={props:{dataSummary:{type:Object,default:()=>({})},sort:{type:Boolean,default:!1},legend:{type:Boolean,default:!1},spinner:{type:Object,default:()=>({show:!0,message:"Generating graph..."})},embedIDURL:{type:Function,default:t=>t}},data(){return{BUCKETIFY_BUCKET_SIZE:30,HEATMAP_MIN_HEIGHT:120,ADJUSTED_BAR_HEIGHT:50,graphGenerated:!1,sortMode:"earliestFirstUpdate",sortFunctions:{earliestFirstUpdate:(t,a)=>t.minTimestamp-a.minTimestamp,latestFirstUpdate:(t,a)=>a.minTimestamp-t.minTimestamp,lastUpdated:(t,a)=>a.maxTimestamp-t.maxTimestamp,parentID:(t,a)=>t.id>a.id?1:-1,parentIDReverse:(t,a)=>t.id<a.id?1:-1},visibleStatusTypes:[],statusTypeList:[],graphConfig:{ready:!1,config:{responsive:!0,displayModeBar:!1}},graphLayout:{ready:!1,layout:{xaxis:{type:"date",side:"top"},yaxis:{title:{}},margin:{b:20,t:50,r:10,pad:0},font:{family:"sans-serif",size:16,color:"#333"}}},tempSpinner:{show:!0,message:"Generating graph..."},graphData:{ready:!1,data:[]},showFullLegend:!1}},methods:{updateEmbedIDURL(t){if("function"!==typeof t)throw TypeError("Argument 'embedFunction' must be of type function");this.embedIDURL=t},sortFunction(){return this.sortFunctions[this.sortMode]},scale(t,a,e,r,i){return(t-a)*(i-r)/(e-a)+r},toggleHiddenStatus(t){const a=this.dataSummary.statusTypes;null!=a[t]&&(a[t].hidden=!a[t].hidden,this.updateStatusTypeList(),this.graph(this.dataSummary))},async graph(t){this.graphLayout.layout.xaxis.range=[t.startDate,t.endDate],this.graphLoading=!0,this.graphData.ready=!1,this.graphLayout.ready=!1,this.graphConfig.ready=!1,this.BUCKETIFY_BUCKET_SIZE=(this.dataSummary.maxTimestamp-this.dataSummary.minTimestamp)*(3.4722*10**-4),await this.$nextTick(),this.graphContainer.$el.style.height=Math.max(this.ADJUSTED_BAR_HEIGHT*t.groupedData.length,this.HEATMAP_MIN_HEIGHT)+"px";const a=new Promise((a,e)=>{t.groupedData.sort(this.sortFunction()).reverse();const r=JSON.parse(JSON.stringify(t.groupedData));t.parentIDs=r.map(t=>t.id);const i=this.statusTypeList;this.updateHeatmapCharts().then(e=>{this.tempSpinner.message="Generating graph...",this.graphData.data=[],i.forEach((a,r)=>{const i=[];i.push(["0.0",a.color]),i.push(["1.0",a.color]),this.graphData.data[r]={x:t.dates,y:t.parentIDs.map(a=>this.embedIDURL(a,t.endpoints[a].shortDescription)),z:e.statusChart[a.type],type:"heatmap",hoverongaps:!1,colorscale:i,showscale:!1,text:e.statusLabel[a.type],hoverinfo:"text",ygap:.75}}),this.graphData.ready=!0,this.graphLayout.ready=!0,this.graphConfig.ready=!0,this.graphGenerated=!0,a(),console.timeEnd("Start heatmap processing")}).catch(t=>{e(t)})}).finally(()=>{this.graphLoading=!1,this.tempSpinner.show=!1});return a},updateHeatmapCharts(){const t=this,a=new Promise((a,e)=>{if(Worker){const e=new Worker("workers/update-heatmap-charts.worker.js");e.addEventListener("message",r=>{const i=r.data;"finished"==i.status?(e.terminate(),t.dataSummary.dates=i.dates,a({statusChart:i.statusChart,statusLabel:i.statusLabel})):"update"==i.status&&(this.tempSpinner.message=`Processing data (${i.body}%)`)}),e.postMessage({dataSummary:t.dataSummary,visibleStatusTypes:t.visibleStatusTypes,BUCKETIFY_BUCKET_SIZE:t.BUCKETIFY_BUCKET_SIZE})}else e(Error("Web Workers not enabled"))});return a},async updateStatusTypeList(){this.visibleStatusTypes=null,this.statusTypeList=null,await this.$nextTick(),this.statusTypeList=Object.values(this.dataSummary.statusTypes||{}),this.visibleStatusTypes=this.statusTypeList.filter(t=>!t.hidden)}},computed:{graphContainer(){return this.$refs.graphContainer},legendToggleText(){return this.showFullLegend?" - Show Less":"+ Show More"}},components:{graph:o["a"]},watch:{spinner:{immediate:!0,deep:!0,async handler(t){await this.$nextTick(),this.tempSpinner.show=t.show,null!=t.message&&(this.tempSpinner.message=t.message)}},dataSummary:{immediate:!0,deep:!0,handler(t){this.updateStatusTypeList(),t.ready&&this.graph(t)}}}},d=u,m=(e("011f"),e("2877")),c=Object(m["a"])(d,l,h,!1,null,null,null),p=c.exports,y=e("bdbd"),g=e("c1df"),b=e.n(g),T=e("9399"),f=e.n(T),w=e("7e98"),v={mixins:[w["a"]],data(){return{endpointData:{id:"",lastSeenTime:"",lastSeenIP:""},timeRange:{toTime:null,fromTime:null},dataSummary:{ready:!1},heatmapSpinner:{show:!0,message:"Generating graph..."}}},components:{heatmap:p,"date-range-dropdown":y["a"],graph:o["a"]},computed:{params(){return this.$route.params},query(){return this.$route.query},rangeDropdownOptions(){return Object.values(this.rangeValues)},monitorIDs(){return null!=this.params.id?[this.params.id]:null}},methods:{setTimeRange(t){this.timeRange=t},processHeatmapData(t,a,e,r){this.heatmapSpinner={show:!0,message:"Sorting data..."};const i=this.dataSummary;i.ready=!1,i.endpoints=r,i.minTimestamp=Number.MAX_VALUE,i.maxTimestamp=0,i.type="Monitor",i.statusTypes={};let n=0;const s=Object.values(t.reduce((r,s)=>{this.heatmapSpinner={show:!0,message:`Sorting data (${Math.ceil(n/t.length*100)}%)`},n++;const o="M"+s.monitor,l=Math.max(a,s.start),h=Math.min(e,s.end);l>i.maxTimestamp&&(i.maxTimestamp=l),l<i.minTimestamp&&(i.minTimestamp=l),h>i.maxTimestamp&&(i.maxTimestamp=h),h<i.minTimestamp&&(i.minTimestamp=h),null==r[o]&&(r[o]={id:o,minTimestamp:Math.min(l,h),maxTimestamp:Math.max(l,h),records:{}}),l>r[o].maxTimestamp&&(r[o].maxTimestamp=l),l<r[o].minTimestamp&&(r[o].minTimestamp=l),h>r[o].maxTimestamp&&(r[o].maxTimestamp=h),h<r[o].minTimestamp&&(r[o].minTimestamp=h);const u=s.exp;if(r[o].records[u]=r[o].records[u]||[],r[o].records[u].push({status:u,success:1===s.success,exp:s.exp,ip:s.ip,timestamp:l}),r[o].records[u].push({status:null,success:1===s.success,exp:s.exp,ip:s.ip,timestamp:h}),null==i.statusTypes[u]){const t=this.graphColor[s.exp];i.statusTypes[u]={type:u,hidden:!1,color:t.rgbString.toLowerCase()}}return r},{}));i.minTimestamp=i.minTimestamp==Number.MAX_VALUE?a:i.minTimestamp,i.maxTimestamp=0==i.maxTimestamp?e:i.maxTimestamp,i.startDate=b()(i.minTimestamp,"X").format("YYYY-MM-DD HH:mm:ss"),i.endDate=b()(i.maxTimestamp,"X").format("YYYY-MM-DD HH:mm:ss"),i.groupedData=s,i.ready=!0},processLatencyHourlyData(t){this.latencyHourlySpinner={show:!0,message:"Sorting data..."},this.latencyHourlyData.ready=!1,this.latencyHourlyLayout.ready=!1;const a=this.$store.state.experiments.filter(t=>t.categories.includes("latency")).map(t=>t.name),e={},r=(t,a)=>{if(t){e[a]||(e[a]=new Array(24).fill(),e[a]=e[a].map(()=>[]));const r=t.end_stime/10**6,i=t.end_rtime/10**6,n=i-r,s=b()(r,"x").utc().hours();isNaN(s)||isNaN(n)||e[a][s].push(n)}};let i=0;t.forEach(e=>{a.includes(e.exp)&&("DNS_local"==e.exp?r(e.data.rst_list[0],e.exp):r(e.data,e.exp)),this.latencyHourlySpinner={show:!0,message:`Sorting data (${Math.ceil(i/t.length*100)}%)`},i++}),Object.keys(e).forEach(t=>{let a=null;e[t]=e[t].map(t=>{const e=t.filter(t=>!!t);if(0==e.length)return a;const r=s.a.mean(e);return a=r,r})}),this.latencyHourlySpinner.message="Generating graph...",this.latencyHourlyData.data=[];const n=2,o=new Array(24).fill().map((t,a)=>a);Object.keys(e).forEach(t=>{const a=this.graphColor[t];this.latencyHourlyData.data.push({x:o,y:e[t],name:t,mode:"lines+markers",line:{color:a.rgbString},marker:{color:"rgba(0,0,0,0)",line:{color:a.rgbString,width:n}}})}),this.latencyHourlyData.ready=!0,this.latencyHourlyLayout.ready=!0,this.latencyHourlySpinner.show=!1},processLatencyTimeData(t){this.latencyTimeSpinner={show:!0,message:"Sorting data..."},this.latencyTimeData.ready=!1,this.latencyTimeLayout.ready=!1,this.latencyTimeCDFData.ready=!1,this.latencyTimeCDFLayout.ready=!1;const a=this.$store.state.experiments.filter(t=>t.categories.includes("latency")).map(t=>t.name),e={},r=(t,a)=>{if(t){e[a]||(e[a]=[]);const r=t.end_stime/10**6,i=t.end_rtime/10**6,n=i-r,s=b()(r,"x").utc().format("YYYY-MM-DD HH:mm:ss.SS");isNaN(n)||e[a].push({timestamp:s,latency:n,sendTime:r})}};let i=0;t.forEach(e=>{a.includes(e.exp)&&("DNS_local"==e.exp?r(e.data.rst_list[0],e.exp):r(e.data,e.exp)),this.latencyTimeSpinner={show:!0,message:`Sorting data (${Math.ceil(i/t.length*100)}%)`},i++}),this.latencyTimeSpinner.message="Generating graph...",this.latencyTimeData.data=[],this.latencyTimeCDFData.data=[];const n=2,s=[];let o=Number.MIN_SAFE_INTEGER,l=Number.MAX_VALUE;Object.keys(e).forEach(t=>{e[t].sort((t,a)=>t.sendTime-a.sendTime);const a=this.graphColor[t];this.latencyTimeData.data.push({x:e[t].map(t=>t.timestamp),y:e[t].map(t=>t.latency),name:t,mode:"lines+markers",line:{color:a.rgbString},marker:{color:"rgba(0,0,0,0)",line:{color:a.rgbString,width:n}}});const r=e[t].map(t=>t.latency).sort((t,a)=>t-a),i=r.map((t,a)=>(a+1)/r.length),s={name:t,x:r,y:i,mode:"lines",line:{color:a.rgbString,width:2}};this.latencyTimeCDFData.data.push(s);const h=Math.max(...r),u=Math.min(...r);o=Math.max(o,h),l=Math.min(l,u)}),this.latencyTimeCDFLayout.layout.xaxis.range=[l,o],this.latencyTimeCDFLayout.layout.shapes=s,this.latencyTimeData.ready=!0,this.latencyTimeLayout.ready=!0,this.latencyTimeCDFData.ready=!0,this.latencyTimeCDFLayout.ready=!0,this.latencyTimeSpinner.show=!1},processBandwidthTimeData(t){this.bandwidthTimeSpinner={show:!0,message:"Sorting data..."},this.bandwidthTimeData.ready=!1,this.bandwidthTimeLayout.ready=!1,this.bandwidthTimeCDFData.ready=!1,this.bandwidthTimeCDFLayout.ready=!1;const a=this.$store.state.experiments.filter(t=>t.categories.includes("bandwidth")).map(t=>t.name),e={},r=t=>{e.avail_band=e.avail_band||[],e.btnk_band=e.btnk_band||[];const a=t.ctrl_stime/10**6,r=b()(a,"x").utc().format("YYYY-MM-DD HH:mm:ss.SS");t.avail_band&&t.btnk_band&&(e.avail_band.push({bandwidth:t.avail_band/10**6,timestamp:r,sendTime:a}),e.btnk_band.push({bandwidth:t.btnk_band/10**6,timestamp:r,sendTime:a}))};let i=0;t.forEach(e=>{a.includes(e.exp)&&r(e.data),this.bandwidthTimeSpinner={show:!0,message:`Sorting data (${Math.ceil(i/t.length*100)}%)`},i++}),this.bandwidthTimeSpinner.message="Generating graph...",this.bandwidthTimeData.data=[],this.bandwidthTimeCDFData.data=[];const n=2,s=[];let o=Number.MIN_SAFE_INTEGER,l=Number.MAX_VALUE;Object.keys(e).forEach((t,a)=>{e[t].sort((t,a)=>t.sendTime-a.sendTime);const r=Object.values(this.graphColor)[a]||f.a.random();this.bandwidthTimeData.data.push({x:e[t].map(t=>t.timestamp),y:e[t].map(t=>t.bandwidth),name:t,mode:"lines+markers",line:{color:r.rgbString},marker:{color:"rgba(0,0,0,0)",line:{color:r.rgbString,width:n}}});const i=e[t].map(t=>t.bandwidth).sort((t,a)=>t-a),s=i.map((t,a)=>(a+1)/i.length),h={name:t,x:i,y:s,mode:"lines",line:{color:r.rgbString,width:2}};this.bandwidthTimeCDFData.data.push(h);const u=Math.max(...i),d=Math.min(...i);o=Math.max(o,u),l=Math.min(l,d)}),this.bandwidthTimeCDFLayout.layout.xaxis.range=[l,o],this.bandwidthTimeCDFLayout.layout.shapes=s,this.bandwidthTimeData.ready=!0,this.bandwidthTimeLayout.ready=!0,this.bandwidthTimeCDFData.ready=!0,this.bandwidthTimeCDFLayout.ready=!0,this.bandwidthTimeSpinner.show=!1},processBandwidthHourlyData(t){this.bandwidthHourlySpinner={show:!0,message:"Sorting data..."},this.bandwidthHourlyData.ready=!1,this.bandwidthHourlyLayout.ready=!1;const a=this.$store.state.experiments.filter(t=>t.categories.includes("bandwidth")).map(t=>t.name),e={},r=t=>{e.avail_band||(e.avail_band=new Array(24).fill(),e.avail_band=e.avail_band.map(()=>[])),e.btnk_band||(e.btnk_band=new Array(24).fill(),e.btnk_band=e.btnk_band.map(()=>[]));const a=t.ctrl_stime/10**6,r=b()(a,"x").utc().hours();t.avail_band&&t.btnk_band&&(e.avail_band[r].push(t.avail_band/10**6),e.btnk_band[r].push(t.btnk_band/10**6))};let i=0;t.forEach(e=>{a.includes(e.exp)&&r(e.data),this.bandwidthHourlySpinner={show:!0,message:`Sorting data (${Math.ceil(i/t.length*100)}%)`},i++});const n={},o={};Object.keys(e).forEach(t=>{let a=null,r=null;n[t]=e[t].map(t=>{const e=t.filter(t=>!!t);if(0==e.length)return a;const r=s.a.mean(e);return a=r,r}),o[t]=e[t].map(t=>{const a=t.filter(t=>!!t);if(0==a.length)return r;const e=s.a.sampleStdev(a);return r=e,e})}),this.bandwidthHourlySpinner.message="Generating graph...",this.bandwidthHourlyData.data=[];const l=2,h=new Array(24).fill().map((t,a)=>a);Object.keys(n).forEach((t,a)=>{const e=Object.values(this.graphColor)[a]||f.a.random();this.bandwidthHourlyData.data.push({x:h,y:n[t],error_y:{type:"data",array:o[t],visible:!0},name:t,mode:"lines+markers",line:{color:e.rgbString},marker:{color:"rgba(0,0,0,0)",line:{color:e.rgbString,width:l}}})}),this.bandwidthHourlyData.ready=!0,this.bandwidthHourlyLayout.ready=!0,this.bandwidthHourlySpinner.show=!1},processRTTTimeData(t){this.rttTimeSpinner={show:!0,message:"Sorting data..."},this.rttTimeData.ready=!1,this.rttTimeLayout.ready=!1;const a=this.$store.state.experiments.filter(t=>t.categories.includes("rtt")).map(t=>t.name),e=[],r=t=>{if(t){const a=t.ctrl_stime/10**6,r=t.ctrl_rtime/10**6,i=r-a,n=b()(a,"x").utc().format("YYYY-MM-DD HH:mm:ss.SS");isNaN(i)||e.push({timestamp:n,rtt:i,sendTime:a})}};let i=0;t.forEach(e=>{a.includes(e.exp)&&("DNS_local"==e.exp?r(e.data.rst_list[0]):r(e.data)),this.rttTimeSpinner={show:!0,message:`Sorting data (${Math.ceil(i/t.length*100)}%)`},i++}),this.rttTimeSpinner.message="Generating graph...",this.rttTimeData.data=[];const n=2,s=this.graphColor.primary;e.sort((t,a)=>t.sendTime-a.sendTime),this.rttTimeData.data.push({x:e.map(t=>t.timestamp),y:e.map(t=>t.rtt),name:"RTT",mode:"lines+markers",line:{color:s.rgbString},marker:{color:"rgba(0,0,0,0)",line:{color:s.rgbString,width:n}}}),this.rttTimeData.ready=!0,this.rttTimeLayout.ready=!0,this.rttTimeSpinner.show=!1},processRTTHourlyData(t){this.rttHourlySpinner={show:!0,message:"Sorting data..."},this.rttHourlyData.ready=!1,this.rttHourlyLayout.ready=!1;const a=this.$store.state.experiments.filter(t=>t.categories.includes("rtt")).map(t=>t.name),e=new Array(24).fill().map(()=>[]),r=t=>{if(t){const a=t.ctrl_stime/10**6,r=t.ctrl_rtime/10**6,i=r-a,n=b()(a,"x").utc().hours();isNaN(n)||isNaN(i)||e[n].push(i)}};let i=0;t.forEach(e=>{a.includes(e.exp)&&("DNS_local"==e.exp?r(e.data.rst_list[0]):r(e.data)),this.rttHourlySpinner={show:!0,message:`Sorting data (${Math.ceil(i/t.length*100)}%)`},i++});let n=null,o=null;const l=e.map(t=>{const a=t.filter(t=>!!t);if(0==a.length)return n;const e=s.a.mean(a);return n=e,e}),h=e.map(t=>{const a=t.filter(t=>!!t);if(0==a.length)return o;const e=s.a.sampleStdev(a);return o=e,e});this.rttHourlySpinner.message="Generating graph...",this.rttHourlyData.data=[];const u=2,d=new Array(24).fill().map((t,a)=>a),m=this.graphColor.primary;this.rttHourlyData.data.push({x:d,y:l,error_y:{type:"data",array:h,visible:!0},name:"Avg. RTT",mode:"lines+markers",line:{color:m.rgbString},marker:{color:"rgba(0,0,0,0)",line:{color:m.rgbString,width:u}}}),this.rttHourlyData.ready=!0,this.rttHourlyLayout.ready=!0,this.rttHourlySpinner.show=!1},initGraphData(){const t=[this.heatmapSpinner,this.latencyHourlySpinner,this.latencyTimeSpinner,this.bandwidthTimeSpinner,this.bandwidthHourlySpinner,this.rttTimeSpinner,this.rttHourlySpinner];t.forEach(t=>{t.show=!0,t.message="Fetching data..."});let{toTime:a,fromTime:e}=this.timeRange;e=null!=e?e:0,a=null!=a?a:parseFloat(b()().format("X")),this.$store.dispatch("loadData",e).then(()=>{const r=this.$store.state.endpoints.reduce((t,a)=>{const e="M"+a.monitor,r=e+" - "+a.description.split(/[\s_]/)[0];return t[e]={shortDescription:r,...a},t},{});this.$store.state.experiments.forEach(t=>{this.graphColor[t.name]=new f.a({type:"hex",color:t.color})});const i=this.$store.state.data.filter((r,i)=>{if(r.monitor){const n=("M"+r.monitor).toLowerCase();return t.forEach(t=>{t.show=!0,t.message=`Filtering data (${Math.ceil(i/this.$store.state.data.length*100)}%)`}),(null==this.monitorIDs||Array.isArray(this.monitorIDs)&&this.monitorIDs.map(t=>t.toLowerCase()).includes(n))&&(r.start>=e&&r.start<=a||r.end>=e&&r.end<=a)}return!1});if(this.processHeatmapData(i,e,a,r),this.monitorIDs){const t=r[this.monitorIDs[0].toUpperCase()];this.endpointData={id:"M"+t.monitor,lastSeenIP:t["last-seen-ip"],lastSeenTime:b()(t["last-seen-time"],"X").fromNow(),description:t.description},this.processLatencyHourlyData(i),this.processLatencyTimeData(i),this.processBandwidthTimeData(i),this.processBandwidthHourlyData(i),this.processRTTTimeData(i),this.processRTTHourlyData(i)}})}},watch:{monitorIDs:{immediate:!0,deep:!0,async handler(){await this.$nextTick(),this.initGraphData()}}}},x=v,D=(e("369b"),Object(m["a"])(x,r,i,!1,null,"e1131b62",null));a["default"]=D.exports}}]);
//# sourceMappingURL=chunk-2405bd50.js.map